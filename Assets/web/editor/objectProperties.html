<!DOCTYPE html>
<html lang="en">
    <head>
        <title>SPP</title>
        <meta charset="utf-8">
		
		<link rel="stylesheet" href="./fontawesome/css/all.css">       
        <script type="text/javascript" src="./jQuery/jquery-3.5.1.js"></script>		
				
	<style>
	
	.styled-table {
		background: #222222;
		border-collapse: collapse;		
		font-size: 0.9em;
		font-family: sans-serif;
		min-width: 300px;	
		color: #ffffff;		
	}
	
	.styled-table thead tr {
		background-color: #009879;
		color: #ffffff;
		text-align: left;
	}

	.styled-table tbody tr {
		border-bottom: 1px solid #dddddd;
	}

	.styled-table tbody tr:nth-of-type(even) {
		background-color: #111111;
	}



    </style>

    </head>
    <body>
		
	<div id='objProp'></div>
	
	<!-- <input type="color" id="head" name="head"  value="#e66465"> -->
	<script>
	
	var NativeTypesPoD = {
		"float" : "Number",
		"double" : "Number",
		"int8_t" : "Number",
		"uint8_t" : "Number",
		"int16_t" : "Number",
		"uint16_t" : "Number",
		"int32_t" : "Number",
		"uint32_t" : "Number",
		"int64_t" : "Number",
		"uint64_t" : "Number",
		"bool" : "Bool"
	};
	
	function NativeStructToInput(memberElement, subTypes, tableCol) {
	
		var tbl = document.createElement('table');		
		var tbdy = document.createElement('tbody');
	
		memberElement.value.forEach(function(memberData) {					
			NativeTypeToInput(memberData, subTypes, tbdy);	
		});
		
		tbl.appendChild(tbdy);
		tableCol.appendChild(tbl);
	}
	
	function NativeEnumToInput(memberElement, subTypeEnum, tableCol) {
		
		var eumSelect = document.createElement("SELECT");
		eumSelect.setAttribute("id", memberElement.name + "EVALUE");
		
		subTypeEnum.values.forEach(function(curValue) {	
			var curOpt = document.createElement("option");
			curOpt.setAttribute("value", curValue);
			var txtNode = document.createTextNode(curValue);
			curOpt.appendChild(txtNode);

			eumSelect.appendChild(curOpt);
		});
				
		tableCol.appendChild(eumSelect);
	}
	
	function NativeTypeToInput(memberElement, subTypes, tableBody) {
		let memberyTypeName = memberElement.type;
		console.log("memberyTypeName: " + memberyTypeName);
		
		if( memberyTypeName in NativeTypesPoD )
		{
			console.log(" POD");
			
			var tr = document.createElement('tr');
			var tdN = document.createElement('td');
			var tdV = document.createElement('td');
			
			tdN.appendChild(document.createTextNode(memberElement.name));
	
			var x = document.createElement("INPUT");
			x.setAttribute("type", "text");
			x.setAttribute("value", memberElement.value);
			
			tdV.appendChild(x);
			
			tr.appendChild(tdN);
			tr.appendChild(tdV);
			
			tableBody.appendChild(tr);
		}
		else if( memberyTypeName in subTypeObj )
		{
			let curSubType = subTypeObj[memberyTypeName];		
							
			var tr = document.createElement('tr');
			var tdN = document.createElement('td');
			var tdV = document.createElement('td');
			
			tdN.appendChild(document.createTextNode(memberElement.name));
				
			console.log(" SUB");
			if( curSubType.type == "enum" )
			{
				console.log("ENUM");				
				NativeEnumToInput(memberElement, curSubType, tdV);
			}
			else
			{
				console.log(" SUB");
				NativeStructToInput(memberElement, subTypes, tdV);				
			}
			
			tr.appendChild(tdN);
			tr.appendChild(tdV);
				
			tableBody.appendChild(tr);
		}
	}
	
	function generateObjTable(divID, TableData, subTypes) {
	
		var tbl = document.createElement('table');		
		var tbdy = document.createElement('tbody');
		
		tbl.setAttribute("class", "styled-table");
	
		TableData.forEach(function(memberData) {					
			NativeTypeToInput(memberData, subTypes, tbdy);	
		});
		
		tbl.appendChild(tbdy);
		
		$("#objProp").append(tbl);
	}
		
	var subTypeInfo =  String.raw`{
		"Vector3" : { 
			"type" : "struct"	
		},
		"EShapeOp" : {
				"type" : "enum",
				"values" : 
				[
					"Add",
					"Subtract",
					"Intersect",
					"SmoothAdd"
				]
		}		
	}`;
	
	const subTypeObj = JSON.parse(subTypeInfo);
	
	var objectDataInfo = String.raw`[
		{
			"name" : "_translation",
			"type" : "Vector3",
			"value" : 
			[
				{
					"name" : "x",
					"type" : "float",
					"value" : "0"
				},
				{
					"name" : "y",
					"type" : "float",
					"value" : "0"
				},
				{
					"name" : "z",
					"type" : "float",
					"value" : "0"
				}
			]
		},
		{
			"name" : "_rotation",
			"type" : "Vector3",
			"value" : 
			[
				{
					"name" : "x",
					"type" : "float",
					"value" : "0"
				},
				{
					"name" : "y",
					"type" : "float",
					"value" : "0"
				},
				{
					"name" : "z",
					"type" : "float",
					"value" : "0"
				}
			]
		},
		{
			"name" : "_scale",
			"type" : "float",
			"value" : "1"
		},
		{
			"name" : "_shapeOp",
			"type" : "EShapeOp",
			"value" : "Add"
		},
		{
			"name" : "_extents",
			"type" : "Vector3",
			"value" : 
			[
				{
					"name" : "x",
					"type" : "float",
					"value" : "1"
				},
				{
					"name" : "y",
					"type" : "float",
					"value" : "1"
				},
				{
					"name" : "z",
					"type" : "float",
					"value" : "1"
				}
			]
		}
	]`;
	
	
	const objectData = JSON.parse(objectDataInfo);
	
	generateObjTable("objProp",objectData,subTypeObj);
	

	</script>

    </body>
	
</html>
